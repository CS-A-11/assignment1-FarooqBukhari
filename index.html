<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale =1.0 shrink-to-fit=yes">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Techifier Accounts</title> 
        <script>window.jQuery = window.$ = require('jquery');</script>
        <script src="js/jquery-ui.js"></script>
        <link rel="stylesheet" href="css/jquery-ui.css">
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <script src="js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="css/simplebar.css"/>
        <script src="js/simplebar.js"></script>
        <link rel="stylesheet" href="style.css">
        <script>
                function resize_trigger()
                {
                    var height = document.getElementsByClassName('modal-content ui-resizable')[0].style.height;
                    height = parseInt(height, 10) - 100;
                    document.getElementsByClassName("modal-body")[0].style.height = `${height}px`;
                }
        </script>

    </head>
    <header>
        <nav id="titleBar" class="navbar" data-spy="affix" data-offset-top="197">
            <div class = "row" id="drag-region">
                <div class="col-xs-6">
                    <img id="titleBar_logo" src="UI_UX/titleBarButtons/app_logo.svg">
                </div>
                <div id = "titleBar_imgs" class="col-xs-6">
                    <img id="cross_btn" src="UI_UX/titleBarButtons/cross.png">
                    <img id="maximize_btn" src="UI_UX/titleBarButtons/browser.png">
                    <img id="minimize_btn" src="UI_UX/titleBarButtons/minimize.png">
                </div>
            </div>
            <!--Menu Bar-->
            <div id="menuBar" class="row"></div>
        </nav>
    </header>
    <body>
	 <!--container Div-->
        <div id="container">
            <div id="sideBarContainer">
                <div id="sideBarHome">
                    <div id="home_btn">
                        <img id="home_logo" class="center" src="UI_UX/navBarButtons/app_home.png">    
                    </div>
                    <div id="separater"></div>
                </div>
                <div id="sideBar" class="navbar">
                    <ul id="navBtns" class="nav navbar-nav dropdown vertical medium-horizontal menu" data-options="disableHover:true;clickOpen:true" data-dropdown-menu>
                        <li class="dropdown navBtn">
                            <p class="dropdown-toggle navLiBtn" data-toggle="dropdown" id="inventory"><span class="navLiBtnLogo"></span>Inventory</p>
                            <ul class="dropdown-menu" role="menu">
                                <li id="addItems"><a class="subMenuLinks" href="#" data-toggle="modal" data-target="#myModal" data-backdrop = "static">Add Item</a></li>
                                <li id="showItems"><a class="subMenuLinks" href="#">Show Inventory</a></li>
                            </ul>
                        </li>
                        <li class="dropdown navBtn">
                            <p class="dropdown-toggle navLiBtn" data-toggle="dropdown" id="membership"><span class="navLiBtnLogo"></span>Accounts</p>
                            <ul class="dropdown-menu" role="menu">
                                <li id="addAccount"><a class="subMenuLinks" href="#" data-toggle="modal" data-target="#myModal" data-backdrop = "static">Add Buyer</a></li>
                                <li id="showAccounts"><a class="subMenuLinks" href="#">Show Accounts</a></li>
                            </ul>
                        </li>
                        <li class="dropdown navBtn">
                            <p class="dropdown-toggle navLiBtn" data-toggle="dropdown" id="installments"><span class="navLiBtnLogo"></span>Installments</p>
                            <ul class="dropdown-menu" role="menu">
                                <li id="addInstallment"><a class="subMenuLinks" href="#" data-toggle="modal" data-target="#myModal" data-backdrop = "static">Update Installment</a></li>
                                <li id="showOnGoingInstallments"><a class="subMenuLinks" href="#">OnGoing Installments</a></li>
                                <li id="showCompletedInstallments"><a class="subMenuLinks" href="#">Completed Installments</a></li>
                            </ul>
                        </li>
                        <li class="dropdown navBtn">
                            <p class="dropdown-toggle navLiBtn" data-toggle="dropdown" id="supplier"><span class="navLiBtnLogo"></span>Purchase</p>
                            <ul class="dropdown-menu" role="menu">
                                <li id="addPurchase"><a class="subMenuLinks" href="#" data-toggle="modal" data-target="#myModal" data-backdrop = "static">Add Purchase</a></li>
                                <li id="showPurchaseHistory"><a class="subMenuLinks" href="#">Purchase History</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
            <div id = "content" class="panel panel-default table-responsive">
                <table id="contentData" class="table table-bordered">
                    <thead class="contentDataHeader">
                        <tr>
                            <th>
                                SERIAL NUMBER
                            </th>
                            <th>
                                NAME
                            </th>
                            <th>
                                CNIC
                            </th>
                            <th>
                                ACCOUNT NUMBER
                            </th>
                            <th>
                                PHONE NUMBER
                            </th>
                        </tr>
                    </thead>
                    <tbody class="table-hover table-condensed contentDataBody ">
                        <tr>
                            <td id='serializer'>
                                SERIAL NUMBER
                            </td>
                            <td>
                                NAME
                            </td>
                            <td>
                                CNIC
                            </td>
                            <td>
                                ACCOUNT NUMBER
                            </td>
                            <td>
                                PHONE NUMBER
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                <div class="modal-content" onresize="resize_trigger()">
                    <div class="modal-header">
                        <img id="cross_btnModal" class="modalClose" data-dismiss="modal" src="UI_UX/titleBarButtons/cross.png">
                        <h4 class="modal-title" id="myModalLabel">Stock Item</h4>
                    </div>
                    <div class="modal-body" id="modalBody">
                        
                    </div>
                    <div class="modal-footer">
                        <button type="button" id="modal-close" class="btn btn-default modal-buttonClose" data-dismiss="modal">Cancel</button>
                        <button type="button" id="save-modal-info" class="btn btn-primary modal-button">Save changes</button>
                    </div>
                </div>
                </div>
            </div>
        </div>
        
        <script>
            $('.modal-content').resizable({
                //alsoResize: ".modal-dialog",
                minWidth: 320
            });
            $('.modal-dialog').draggable();

            $('#myModal').on('show.bs.modal', function () {
                $(this).find('.modal-body').css({
                    'max-height':'100%'
                });
            });
        </script>
        <script>
            function trigger_resize()
            {
                var height = document.getElementsByClassName('modal-content ui-resizable')[0].style.height - 100;
                console.log(height);
                document.getElementsByClassName("modal-body")[0].style.height = `${height}px`;
            }
        </script>
        <script>
            document.getElementById("addItems").addEventListener("click",(e) =>{
                var modalBodyForm = "<form class=\"modal-form\"></form>";
                var formGroups = [];
                for (let index = 0; index < 6; index++) {
                    formGroups[index] = "<div class=\"form-group\"><label class=\"control-label\"></label><input type=\"text\" class=\"form-control\"></div>";    
                }
                $(".modal-body").append(modalBodyForm);
                for (let index = 5; index >= 0; index--) {
                    if(index == 0){
                        var SupplierType = "<div class=\"form-group\"><label for\"sType\"class=\"control-label\">Supplier Type</label><select style=\"display:block; width:100%; height:40px;\" id=\"sType\" name=\"supplierType\"><option value=\"Person\">Person</option><option value=\"Company\">Company</option></select></div>"; 
                        $(".modal-form").append(SupplierType);
                    }
                    $(".modal-form").append(formGroups[index]);
                }
                var modalForm = document.getElementsByClassName("form-group");
                
                modalForm[0].children[0].setAttribute('for', "supplierName");
                modalForm[0].children[0].innerHTML = "Supplier Name";
                modalForm[0].children[1].setAttribute('id', "supplierName");

                modalForm[1].children[0].setAttribute('for', "unitsPurchased");
                modalForm[1].children[0].innerHTML="Units Purchased";
                modalForm[1].children[1].setAttribute('id', "unitsPurchased");

                modalForm[2].children[0].setAttribute('for', "pricePerUnit");
                modalForm[2].children[0].innerHTML="Price Per Unit";
                modalForm[2].children[1].setAttribute('id', "pricePerUnit");

                modalForm[3].children[0].setAttribute('for', "contactNumber");
                modalForm[3].children[0].innerHTML="Contact Number";
                modalForm[3].children[1].setAttribute('id', "contactNumber");

                modalForm[4].children[0].setAttribute('for', "CNIC");
                modalForm[4].children[0].innerHTML="CNIC";
                modalForm[4].children[1].setAttribute('id', "CNIC");

                modalForm[6].children[0].setAttribute('for', "itemName");
                modalForm[6].children[0].innerHTML="Item Name";
                modalForm[6].children[1].setAttribute('id', "itemName");

                new SimpleBar(document.getElementById('modalBody'));
            });
        </script>
        <script>
            document.getElementsByClassName("modal-header")[0].children[0].addEventListener("click",(e) =>{
                $(".modal-body").empty();
            });
        </script>
        <script>
            document.getElementById("modal-close").addEventListener("click",(e) =>{
                $(".modal-body").empty();
            });
        </script>
        <script>
            document.getElementById("save-modal-info").addEventListener("click",(e) =>{
                $(".modal-body").empty();
            });
        </script>

		<!--Scripts for app-->
        <script>
                (function () {
                    // Retrieve remote BrowserWindow
                    const {BrowserWindow} = require('electron').remote
        
                    function init() {
                        // Minimize task
                        document.getElementById("minimize_btn").addEventListener("click", (e) => {
                            var window = BrowserWindow.getFocusedWindow();
                            window.minimize();
                        });
        
                        // Maximize window
                        document.getElementById("maximize_btn").addEventListener("click", (e) => {
                            var window = BrowserWindow.getFocusedWindow();
                            if(window.isMaximized()){
                                window.unmaximize();
                            }else{
                                window.maximize();
                            }
                        });
        
                        // Close app
                        document.getElementById("cross_btn").addEventListener("click", (e) => {
                            var window = BrowserWindow.getFocusedWindow();
                            window.close();
                        });
                    };
        
                    document.onreadystatechange =  () => {
                        if (document.readyState == "complete") {
                            init();
                        }
                    };
                })();
        </script>
        <script>
            new SimpleBar(document.getElementById('content'));
        </script>
        <script>
                new SimpleBar(document.getElementById('sideBar'));
        </script>
        <script src="js/functions.js"></script>
        <script>
                $(function () {
                    var rows = $('#contentData tr');
                    $("td").click(function() {
                        var selected = $(this).hasClass("highlight");
                        $(this).toggleClass("highlight");
                        rows.children().removeClass('highlight');
                        if(!selected)
                           $(this).addClass("highlight");
                    });
                });
            </script>
        <script>
            $(function () {
                var rows = $('#contentData tr');
                $("#serializer").click(function() {
                    var selected = $(this).parent().hasClass("highlight");
                    $(this).parent().toggleClass("highlight");
                    rows.children().removeClass('highlight');
                    if(!selected)
                       $(this).parent().addClass("highlight");
                });
            });
        </script>
        <script>
            $(function() {
                var rows = $('#contentData tr');  
                $("th").click(function() {
                    rows.children().removeClass('highlight');  
                    var index = $(this).prevAll().length;  
                    rows.find(':nth-child(' + (index + 1) + ')').toggleClass('highlight');
                    });
            });
        </script>
        <script>
            $(function() {
                var rows = $('#contentData tr');  
                $("#sideBar").click(function() {
                    rows.children().removeClass('highlight');  
                });
            });
        </script>
        <script>
            $(function() {
                var rows = $('#contentData tr');  
                $(".row").click(function() {
                    rows.children().removeClass('highlight');  
                });
            });
        </script>
        <script>
            var dropdown = document.getElementsByClassName("navBtn");
            var i;

            for (i = 0; i < dropdown.length; i++) {
                dropdown[i].addEventListener("click", function() {
                var dropdownContent = this.getElementsByTagName('p')[0].classList.toggle("opennavLiBtn");
                
            });
            } 
        </script>
    </body>
</html>